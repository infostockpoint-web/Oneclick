<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>.htaccess Redirect Generator — One Click</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>
<body>
  <div id="header-container"></div>
  <main class="tool-container">
    <div class="tool-header">
      <h1>.htaccess Redirect Generator</h1>
      <p>Create Apache redirect rules for common scenarios (301/302, http→https, non-www→www, single URL, folder, wildcard).</p>
    </div>

    <div class="tool-interface">
      <div class="form-group">
        <label for="type">Redirect Type</label>
        <select id="type" class="form-control">
          <option value="301">301 (Permanent)</option>
          <option value="302">302 (Temporary)</option>
        </select>
      </div>

      <div class="form-group">
        <label for="mode">Mode</label>
        <select id="mode" class="form-control">
          <option value="single">Single URL → URL</option>
          <option value="folder">Folder → Folder</option>
          <option value="wildcard">Wildcard (pattern) → Target</option>
          <option value="https">Force HTTPS</option>
          <option value="www">Force www</option>
          <option value="nonwww">Force non-www</option>
        </select>
      </div>

      <div id="inputs">
        <div class="form-group" data-for="single folder wildcard">
          <label for="from">From</label>
          <input id="from" class="form-control" placeholder="/old-page or /old-folder/ or ^old/(.*)$" />
        </div>
        <div class="form-group" data-for="single folder wildcard">
          <label for="to">To</label>
          <input id="to" class="form-control" placeholder="/new-page or /new-folder/ or /target/$1" />
        </div>
      </div>

      <div class="d-flex" style="gap:10px;flex-wrap:wrap;">
        <button id="genBtn" class="btn btn-primary">Generate</button>
        <button id="copyBtn" class="btn btn-success">Copy</button>
      </div>

      <div class="form-group mt-3">
        <label for="output">.htaccess Rules</label>
        <textarea id="output" class="form-control" rows="12" readonly></textarea>
      </div>

      <div class="result-area">Tip: Place these rules at the top of your site's .htaccess (Apache). Backup your existing file before changes.</div>
    </div>

    <div class="ad-space"><h4>Advertisement</h4><p>300x250</p></div>
  </main>
  <div id="footer-container"></div>

  <script src="../assets/js/common.js"></script>
  <script>
    const modeSel = document.getElementById('mode');
    const typeSel = document.getElementById('type');
    const fromEl = document.getElementById('from');
    const toEl = document.getElementById('to');
    const output = document.getElementById('output');

    function toggleInputs(){
      const mode = modeSel.value;
      document.querySelectorAll('#inputs [data-for]')
        .forEach(group => {
          const modes = group.getAttribute('data-for').split(/\s+/);
          group.style.display = modes.includes(mode) ? 'block' : 'none';
        });
    }
    modeSel.addEventListener('change', toggleInputs);
    toggleInputs();

    function gen(){
      const t = typeSel.value;
      const m = modeSel.value;
      const from = fromEl.value.trim();
      const to = toEl.value.trim();
      let rules = '';

      if (m === 'single') {
        rules = `Redirect ${t} ${from} ${to}`;
      } else if (m === 'folder') {
        rules = `RedirectMatch ${t} ^${from.replace(/\/$/,'')}/(.*)$ ${to.replace(/\/$/,'')}/$1`;
      } else if (m === 'wildcard') {
        rules = `RewriteEngine On\nRewriteRule ${from} ${to} [R=${t},L]`;
      } else if (m === 'https') {
        rules = `RewriteEngine On\nRewriteCond %{HTTPS} !=on\nRewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=${t},L]`;
      } else if (m === 'www') {
        rules = `RewriteEngine On\nRewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]\nRewriteRule ^ https://www.%1%{REQUEST_URI} [R=${t},L]`;
      } else if (m === 'nonwww') {
        rules = `RewriteEngine On\nRewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]\nRewriteRule ^ https://%1%{REQUEST_URI} [R=${t},L]`;
      }

      output.value = rules;
      showNotification('Rules generated', 'success');
    }

    document.getElementById('genBtn').addEventListener('click', gen);
    document.getElementById('copyBtn').addEventListener('click', ()=>copyToClipboard(output.value));
  </script>
</body>
</html>

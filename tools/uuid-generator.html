<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UUID Generator — One Click</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>
<body>
  <div id="header-container"></div>
  <main class="tool-container">
    <div class="tool-header">
      <h1>UUID Generator</h1>
      <p>Generate RFC 4122 version 4 UUIDs securely using your browser's crypto APIs.</p>
    </div>
    <div class="tool-interface">
      <div class="d-flex" style="gap:10px;flex-wrap:wrap;">
        <button id="genBtn" class="btn btn-primary">Generate UUID</button>
        <button id="copyBtn" class="btn btn-success">Copy</button>
      </div>
      <div class="result-area mt-3">
        <strong>UUID v4:</strong>
        <div id="uuid" style="word-break:break-all;margin-top:8px;">—</div>
      </div>
    </div>
    <div class="ad-space"><h4>Advertisement</h4><p>300x250</p></div>
  </main>
  <div id="footer-container"></div>
  <script src="../assets/js/common.js"></script>
  <script>
    function uuidv4(){
      if (window.crypto && crypto.getRandomValues){
        const a = new Uint8Array(16);
        crypto.getRandomValues(a);
        a[6] = (a[6] & 0x0f) | 0x40; // version 4
        a[8] = (a[8] & 0x3f) | 0x80; // variant 10
        const hex = [...a].map(b => b.toString(16).padStart(2,'0'));
        return `${hex[0]}${hex[1]}${hex[2]}${hex[3]}-${hex[4]}${hex[5]}-${hex[6]}${hex[7]}-${hex[8]}${hex[9]}-${hex[10]}${hex[11]}${hex[12]}${hex[13]}${hex[14]}${hex[15]}`;
      }
      // Fallback (less secure)
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
        const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    }

    const out = document.getElementById('uuid');
    document.getElementById('genBtn').addEventListener('click', () => { out.textContent = uuidv4(); });
    document.getElementById('copyBtn').addEventListener('click', () => copyToClipboard(out.textContent));
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Invoice Template Creator - One Click Tools</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="../css/style.css" />
  <style>
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;align-items:end}
    .preview{border:1px solid #eee;border-radius:10px;background:#fff}
    .code{white-space:pre-wrap;word-break:break-word;background:#f7f7f7;border-radius:8px;padding:10px}
    table.inv{width:100%;border-collapse:collapse}
    .inv th,.inv td{padding:8px;border-bottom:1px solid #f3f3f3;text-align:left}
  </style>
</head>
<body>
  <div id="site-header"></div>
  <main class="container" style="padding:60px 0;">
    <div class="tool-card" style="max-width:1100px;margin:0 auto;">
      <div style="text-align:center;margin-bottom:10px;">
        <i class="fas fa-file-invoice-dollar tool-icon-small" style="font-size:3rem;"></i>
        <div class="tool-name" style="font-size:1.6rem;">Invoice Template Creator</div>
        <div class="tool-desc">Build a simple invoice and export HTML for printing or sharing.</div>
      </div>

      <div class="tool-card" style="padding:16px;">
        <div class="grid">
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Your Company</label><input id="company" type="text" value="One Click" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Company Address</label><input id="addr" type="text" value="Street, City, Country" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Client Name</label><input id="client" type="text" value="Client Co." style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Invoice #</label><input id="invno" type="text" value="INV-001" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Date</label><input id="date" type="date" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Currency</label><input id="cur" type="text" value="â‚¹" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
        </div>
      </div>

      <div class="tool-card" style="padding:16px;">
        <div class="grid">
          <div style="grid-column:1/-1" class="tool-name">Items</div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Description</label><input id="desc" type="text" placeholder="Service / Product" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Qty</label><input id="qty" type="number" min="0" step="1" value="1" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <div><label style="display:block;font-weight:600;margin-bottom:6px;">Rate</label><input id="rate" type="number" min="0" step="0.01" value="1000" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px"></div>
          <button id="addItem" class="tool-button">Add Item</button>
        </div>
      </div>

      <div class="grid">
        <div class="tool-card preview" style="padding:0;overflow:auto;">
          <iframe id="iframe" style="width:100%;height:500px;border:0;border-radius:10px;"></iframe>
        </div>
        <div class="tool-card" style="padding:16px;">
          <div class="tool-name" style="margin-bottom:6px;">Actions</div>
          <button id="build" class="tool-button">Build Invoice</button>
          <button id="print" class="tool-button"><i class="fas fa-print"></i> Print</button>
          <button id="download" class="tool-button"><i class="fas fa-download"></i> Download HTML</button>
        </div>
      </div>

      <div class="banner-ad" style="margin-top:16px;">Ad Placeholder (728x90)</div>
      <div style="text-align:center;margin-top:8px;"><a class="tool-button" href="../index.html">Back to Home</a></div>
    </div>
  </main>
  <div id="site-footer"></div>
  <script src="../js/include.js"></script>
  <script>
    const items=[];
    function fmt(n){ return Number(n).toLocaleString(undefined,{maximumFractionDigits:2}); }
    document.getElementById('addItem').addEventListener('click',()=>{
      const desc=document.getElementById('desc').value.trim();
      const qty=+document.getElementById('qty').value||0;
      const rate=+document.getElementById('rate').value||0;
      if(!desc||!qty||!rate){ alert('Enter description, qty, and rate.'); return; }
      items.push({desc, qty, rate}); document.getElementById('desc').value=''; build();
    });
    function build(){
      const company=document.getElementById('company').value.trim();
      const addr=document.getElementById('addr').value.trim();
      const client=document.getElementById('client').value.trim();
      const invno=document.getElementById('invno').value.trim();
      const date=document.getElementById('date').value;
      const cur=document.getElementById('cur').value||'';
      const sub=items.reduce((a,i)=>a+i.qty*i.rate,0);
      const tax=sub*0.0; const total=sub+tax;
      const rows=items.map(i=>`<tr><td>${i.desc}</td><td>${i.qty}</td><td style="text-align:right">${cur} ${fmt(i.rate)}</td><td style="text-align:right">${cur} ${fmt(i.qty*i.rate)}</td></tr>`).join('');
      const html = `<!DOCTYPE html><html><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1.0'><title>Invoice ${invno}</title></head>
      <body style="font-family:Arial,Helvetica,sans-serif;color:#333;background:#f5f7fb;margin:0;">
        <div style="max-width:800px;margin:20px auto;background:#fff;border-radius:10px;overflow:hidden;border:1px solid #eee;">
          <div style="padding:18px 20px;background:#1f7ae0;color:#fff;font-weight:700;display:flex;justify-content:space-between;">
            <div>${company}</div><div>Invoice ${invno}</div>
          </div>
          <div style="padding:20px;">
            <div style="display:flex;justify-content:space-between;flex-wrap:wrap;gap:10px;">
              <div><div style="font-weight:700">Billed To</div><div>${client}</div></div>
              <div><div style="font-weight:700">From</div><div>${company}<br>${addr}</div></div>
              <div><div style="font-weight:700">Date</div><div>${date||''}</div></div>
            </div>
            <table class="inv" style="margin-top:12px;">
              <thead><tr><th>Description</th><th>Qty</th><th style="text-align:right">Rate</th><th style="text-align:right">Amount</th></tr></thead>
              <tbody>${rows||'<tr><td colspan="4">No items yet.</td></tr>'}</tbody>
            </table>
            <div style="text-align:right;margin-top:12px;">
              <div>Subtotal: <strong>${cur} ${fmt(sub)}</strong></div>
              <div>Tax: <strong>${cur} ${fmt(tax)}</strong></div>
              <div>Total: <strong>${cur} ${fmt(total)}</strong></div>
            </div>
          </div>
        </div>
      </body></html>`;
      const doc=document.getElementById('iframe').contentWindow.document; doc.open(); doc.write(html); doc.close();
      return html;
    }
    document.getElementById('build').addEventListener('click', build);
    document.getElementById('print').addEventListener('click', ()=>{ const win=document.getElementById('iframe').contentWindow; win.focus(); win.print(); });
    document.getElementById('download').addEventListener('click', ()=>{ const html=build(); const a=document.createElement('a'); const blob=new Blob([html],{type:'text/html'}); a.href=URL.createObjectURL(blob); a.download='invoice.html'; a.click(); });
    build();
  </script>
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HTML to Markdown â€” One Click</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>
<body>
  <div id="header-container"></div>
  <main class="tool-container">
    <div class="tool-header">
      <h1>HTML to Markdown</h1>
      <p>Convert simple HTML to Markdown format in your browser.</p>
    </div>
    <div class="tool-interface">
      <div class="form-group">
        <label for="input">HTML Input</label>
        <textarea id="input" class="form-control" rows="10" placeholder="<h1>Title</h1>\n<p><strong>Bold</strong> and <em>italic</em> text.</p>\n<a href='https://example.com'>Link</a>"></textarea>
      </div>
      <div class="d-flex" style="gap:10px;flex-wrap:wrap;">
        <button id="convertBtn" class="btn btn-primary">Convert</button>
        <button id="copyBtn" class="btn btn-success">Copy</button>
      </div>
      <div class="form-group mt-3">
        <label for="output">Markdown Output</label>
        <textarea id="output" class="form-control" rows="10" readonly></textarea>
      </div>
    </div>
    <div class="ad-space"><h4>Advertisement</h4><p>300x250</p></div>
  </main>
  <div id="footer-container"></div>
  <script src="../assets/js/common.js"></script>
  <script>
    // Basic HTML to Markdown converter (handles common tags)
    function htmlToMarkdown(html){
      let md = html;
      // Normalize line breaks
      md = md.replace(/\r\n?|\n/g, '\n');
      // Replace headings
      md = md.replace(/<h1[^>]*>([\s\S]*?)<\/h1>/gi, '# $1\n\n');
      md = md.replace(/<h2[^>]*>([\s\S]*?)<\/h2>/gi, '## $1\n\n');
      md = md.replace(/<h3[^>]*>([\s\S]*?)<\/h3>/gi, '### $1\n\n');
      md = md.replace(/<h4[^>]*>([\s\S]*?)<\/h4>/gi, '#### $1\n\n');
      md = md.replace(/<h5[^>]*>([\s\S]*?)<\/h5>/gi, '##### $1\n\n');
      md = md.replace(/<h6[^>]*>([\s\S]*?)<\/h6>/gi, '###### $1\n\n');
      // Bold/italic/underline
      md = md.replace(/<\s*strong[^>]*>([\s\S]*?)<\s*\/strong>/gi, '**$1**');
      md = md.replace(/<\s*b[^>]*>([\s\S]*?)<\s*\/b>/gi, '**$1**');
      md = md.replace(/<\s*em[^>]*>([\s\S]*?)<\s*\/em>/gi, '*$1*');
      md = md.replace(/<\s*i[^>]*>([\s\S]*?)<\s*\/i>/gi, '*$1*');
      // Links
      md = md.replace(/<a[^>]*href=["']([^"']+)["'][^>]*>([\s\S]*?)<\/a>/gi, '[$2]($1)');
      // Images
      md = md.replace(/<img[^>]*alt=["']([^"']*)["'][^>]*src=["']([^"']+)["'][^>]*>/gi, '![$1]($2)');
      // Lists
      md = md.replace(/<li[^>]*>([\s\S]*?)<\/li>/gi, '- $1\n');
      md = md.replace(/<ul[^>]*>([\s\S]*?)<\/ul>/gi, '$1\n');
      md = md.replace(/<ol[^>]*>([\s\S]*?)<\/ol>/gi, '$1\n');
      // Paragraphs and line breaks
      md = md.replace(/<p[^>]*>([\s\S]*?)<\/p>/gi, '$1\n\n');
      md = md.replace(/<br\s*\/?>(\s*)/gi, '\n');
      // Code
      md = md.replace(/<code[^>]*>([\s\S]*?)<\/code>/gi, '`$1`');
      // Strip remaining tags
      md = md.replace(/<[^>]+>/g, '');
      // Decode HTML entities (basic)
      md = md.replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"').replace(/&#39;/g, "'");
      // Trim extra spaces
      return md.replace(/\n{3,}/g, '\n\n').trim() + '\n';
    }

    document.getElementById('convertBtn').addEventListener('click', () => {
      const html = document.getElementById('input').value || '';
      document.getElementById('output').value = htmlToMarkdown(html);
      showNotification('Converted to Markdown', 'success');
    });
    document.getElementById('copyBtn').addEventListener('click', ()=>copyToClipboard(document.getElementById('output').value));
  </script>
</body>
</html>

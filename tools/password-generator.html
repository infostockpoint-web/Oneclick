<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Password Generator - One Click Tools</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link rel="stylesheet" href="../css/style.css"></head><body>
<div id="site-header"></div>
<main class="container" style="padding:60px 0;">
  <div class="tool-card" style="max-width:960px; margin:0 auto;">
    <div style="text-align:center; margin-bottom:10px;">
      <i class="fas fa-key tool-icon-small" style="font-size:3rem;"></i>
      <div class="tool-name" style="font-size:1.6rem;">Password Generator</div>
      <div class="tool-desc">Generate strong, random passwords with custom length and character sets.</div>
    </div>

    <div class="tool-card" style="padding:16px;">
      <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:12px; align-items:end;">
        <div>
          <label for="passwordLength" style="display:block; font-weight:600; margin-bottom:6px;">Password Length: <span id="lengthValue">12</span></label>
          <input type="range" id="passwordLength" min="8" max="50" value="12" style="width:100%;">
        </div>
        <div>
          <label for="quantity" style="display:block; font-weight:600; margin-bottom:6px;">Number of Passwords</label>
          <select id="quantity" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px;">
            <option value="1">1 Password</option>
            <option value="5">5 Passwords</option>
            <option value="10">10 Passwords</option>
            <option value="20">20 Passwords</option>
          </select>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button id="generateBtn" class="tool-button">Generate Passwords</button>
          <button id="clearBtn" class="tool-button" style="background:#888;">Clear</button>
        </div>
      </div>
    </div>

    <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:12px; margin-top:16px;">
      <div class="tool-card" style="padding:16px;">
        <div class="tool-name">Character Sets</div>
        <div style="margin-top:10px;">
          <label><input type="checkbox" id="uppercase" checked> Uppercase Letters (A-Z)</label><br>
          <label><input type="checkbox" id="lowercase" checked> Lowercase Letters (a-z)</label><br>
          <label><input type="checkbox" id="numbers" checked> Numbers (0-9)</label><br>
          <label><input type="checkbox" id="symbols" checked> Special Characters (!@#$%^&*)</label><br>
          <label><input type="checkbox" id="extendedSymbols"> Extended Symbols ({}[]()|/\'`~,;:.<>?</label><br>
          <label><input type="checkbox" id="ambiguous" checked> Exclude Ambiguous Characters (iIlL1oO0)</label>
        </div>
      </div>
      <div class="tool-card" style="padding:16px;">
        <div class="tool-name">Password Strength</div>
        <div id="strengthIndicator" style="margin-top:10px; display:none;">
          <div style="margin-bottom:10px;">
            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
              <span>Strength:</span>
              <span id="strengthText">Very Weak</span>
            </div>
            <div style="width:100%; height:8px; background:#eee; border-radius:4px; overflow:hidden;">
              <div id="strengthBar" style="height:100%; width:0%; transition:width 0.3s;"></div>
            </div>
          </div>
          <div style="font-size:0.9rem; color:#666; margin-top:10px;">
            <div id="strengthTips"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="tool-card" style="padding:16px; margin-top:16px;">
      <div class="tool-name">Generated Passwords</div>
      <div id="passwordList" style="border:1px solid #ddd; padding:10px; min-height:120px; background:#f9f9f9; font-family:monospace; margin-top:10px;">
        Click "Generate Passwords" to create random passwords...
      </div>
      <div style="margin-top:10px;">
        <button id="copyAllBtn" class="tool-button" style="background:#28a745;">Copy All Passwords</button>
        <button id="saveBtn" class="tool-button" style="background:#007bff;">Save as Text File</button>
      </div>
    </div>

    <div class="banner-ad" style="margin-top:16px;">Ad Placeholder (728x90)</div>
    <div style="text-align:center; margin-top:8px;">
      <a class="tool-button" href="../index.html">Back to Home</a>
    </div>
  </div>
</main>
<div id="site-footer"></div>
<script src="../js/include.js"></script>
<script>
  const passwordLength = document.getElementById('passwordLength');
  const lengthValue = document.getElementById('lengthValue');
  const quantity = document.getElementById('quantity');
  const generateBtn = document.getElementById('generateBtn');
  const clearBtn = document.getElementById('clearBtn');
  const copyAllBtn = document.getElementById('copyAllBtn');
  const saveBtn = document.getElementById('saveBtn');
  const passwordList = document.getElementById('passwordList');
  const strengthIndicator = document.getElementById('strengthIndicator');
  const strengthText = document.getElementById('strengthText');
  const strengthBar = document.getElementById('strengthBar');
  const strengthTips = document.getElementById('strengthTips');

  const uppercase = document.getElementById('uppercase');
  const lowercase = document.getElementById('lowercase');
  const numbers = document.getElementById('numbers');
  const symbols = document.getElementById('symbols');
  const extendedSymbols = document.getElementById('extendedSymbols');
  const ambiguous = document.getElementById('ambiguous');

  // Character sets
  const charSets = {
    uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
    lowercase: 'abcdefghijklmnopqrstuvwxyz',
    numbers: '0123456789',
    symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?',
    extendedSymbols: '`~\\"|}{[]()|/\'`~,;:.<>?'
  };

  // Ambiguous characters to exclude
  const ambiguousChars = 'iIlL1oO0';

  function updateLengthValue() {
    lengthValue.textContent = passwordLength.value;
  }

  function getSelectedCharSets() {
    const selected = [];
    if (uppercase.checked) selected.push(charSets.uppercase);
    if (lowercase.checked) selected.push(charSets.lowercase);
    if (numbers.checked) selected.push(charSets.numbers);
    if (symbols.checked) selected.push(charSets.symbols);
    if (extendedSymbols.checked) selected.push(charSets.extendedSymbols);
    return selected;
  }

  function generatePassword(length, charSets) {
    if (charSets.length === 0) {
      throw new Error('At least one character set must be selected');
    }

    let allChars = charSets.join('');

    // Remove ambiguous characters if option is selected
    if (ambiguous.checked) {
      allChars = allChars.split('').filter(char => !ambiguousChars.includes(char)).join('');
    }

    if (allChars.length === 0) {
      throw new Error('No characters available for password generation');
    }

    let password = '';
    const minCharTypes = Math.min(charSets.length, 4); // Ensure at least one char from each type if possible

    // Ensure at least one character from each selected set
    for (let i = 0; i < minCharTypes && i < length; i++) {
      const charSet = charSets[i];
      let char;
      do {
        char = charSet[Math.floor(Math.random() * charSet.length)];
      } while (ambiguous.checked && ambiguousChars.includes(char));
      password += char;
    }

    // Fill remaining positions with random characters
    for (let i = minCharTypes; i < length; i++) {
      let char;
      do {
        char = allChars[Math.floor(Math.random() * allChars.length)];
      } while (ambiguous.checked && ambiguousChars.includes(char));
      password += char;
    }

    // Shuffle the password
    password = password.split('').sort(() => 0.5 - Math.random()).join('');

    return password;
  }

  function calculatePasswordStrength(password) {
    let score = 0;
    const feedback = [];

    // Length scoring
    if (password.length >= 8) score += 10;
    if (password.length >= 12) score += 10;
    if (password.length >= 16) score += 10;
    if (password.length >= 20) score += 10;

    // Character variety scoring
    if (/[a-z]/.test(password)) score += 10;
    if (/[A-Z]/.test(password)) score += 10;
    if (/[0-9]/.test(password)) score += 10;
    if (/[^a-zA-Z0-9]/.test(password)) score += 15;

    // Bonus for longer passwords with special characters
    if (password.length >= 16 && /[^a-zA-Z0-9]/.test(password)) score += 10;

    // Deductions for common patterns
    if (/(.)\/1{2,}/.test(password)) score -= 10; // Repeated characters
    if (/123|abc|qwerty/i.test(password)) score -= 15; // Common sequences

    // Ensure score is between 0 and 100
    score = Math.max(0, Math.min(100, score));

    // Generate feedback
    if (password.length < 8) {
      feedback.push('â€¢ Password is too short (minimum 8 characters)');
    }
    if (!/[a-z]/.test(password)) {
      feedback.push('â€¢ Add lowercase letters for better security');
    }
    if (!/[A-Z]/.test(password)) {
      feedback.push('â€¢ Add uppercase letters for better security');
    }
    if (!/[0-9]/.test(password)) {
      feedback.push('â€¢ Add numbers for better security');
    }
    if (!/[^a-zA-Z0-9]/.test(password)) {
      feedback.push('â€¢ Add special characters for maximum security');
    }
    if (password.length >= 16 && /[^a-zA-Z0-9]/.test(password)) {
      feedback.push('â€¢ Excellent! This is a very strong password');
    }

    return { score, feedback };
  }

  function getStrengthLevel(score) {
    if (score < 30) return { level: 'Very Weak', color: '#dc3545' };
    if (score < 50) return { level: 'Weak', color: '#fd7e14' };
    if (score < 70) return { level: 'Fair', color: '#ffc107' };
    if (score < 90) return { level: 'Good', color: '#28a745' };
    return { level: 'Very Strong', color: '#20c997' };
  }

  function generatePasswords() {
    const length = parseInt(passwordLength.value);
    const count = parseInt(quantity.value);
    const selectedCharSets = getSelectedCharSets();

    if (selectedCharSets.length === 0) {
      alert('Please select at least one character set.');
      return;
    }

    generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
    generateBtn.disabled = true;

    // Simulate generation delay for better UX
    setTimeout(() => {
      try {
        const passwords = [];
        for (let i = 0; i < count; i++) {
          const password = generatePassword(length, selectedCharSets);
          passwords.push(password);
        }

        // Display passwords
        passwordList.innerHTML = passwords.map((pwd, index) => 
          `<div style="margin:5px 0; padding:8px; background:white; border-radius:4px; border-left:4px solid #007bff;">
            <strong>${index + 1}.</strong> <span style="font-size:1.1em;">${pwd}</span>
            <button class="copy-btn" onclick="copyPassword('${pwd}')" style="float:right; background:#28a745; color:white; border:none; padding:4px 8px; border-radius:4px; cursor:pointer; font-size:0.8em;">Copy</button>
          </div>`
        ).join('');

        // Show strength indicator for first password
        if (passwords.length > 0) {
          const strength = calculatePasswordStrength(passwords[0]);
          const strengthInfo = getStrengthLevel(strength.score);

          strengthText.textContent = strengthInfo.level;
          strengthBar.style.width = `${strength.score}%`;
          strengthBar.style.backgroundColor = strengthInfo.color;
          strengthTips.innerHTML = strength.feedback.map(tip => `<div>${tip}</div>`).join('');
          strengthIndicator.style.display = 'block';
        }

      } catch (error) {
        alert('Error generating passwords: ' + error.message);
        passwordList.innerHTML = 'Error generating passwords. Please try again.';
      }

      generateBtn.innerHTML = 'Generate Passwords';
      generateBtn.disabled = false;
    }, 500);
  }

  async function copyPassword(password) {
    try {
      await navigator.clipboard.writeText(password);
      // Show visual feedback
      const btn = event.target;
      const originalText = btn.textContent;
      btn.textContent = 'Copied!';
      btn.style.background = '#28a745';
      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = '#28a745';
      }, 1000);
    } catch (err) {
      // Fallback for older browsers
      const textArea = document.createElement('textarea');
      textArea.value = password;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      alert('Password copied to clipboard!');
    }
  }

  async function copyAllPasswords() {
    const passwordElements = passwordList.querySelectorAll('span');
    const passwords = Array.from(passwordElements).map(el => el.textContent.trim());
    
    if (passwords.length === 0) {
      alert('No passwords to copy. Generate some passwords first.');
      return;
    }

    try {
      await navigator.clipboard.writeText(passwords.join('\n'));
      const btn = copyAllBtn;
      const originalText = btn.textContent;
      btn.textContent = 'All Copied!';
      btn.style.background = '#28a745';
      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = '#28a745';
      }, 1000);
    } catch (err) {
      alert('Passwords copied to clipboard!');
    }
  }

  function saveAsTextFile() {
    const passwordElements = passwordList.querySelectorAll('span');
    const passwords = Array.from(passwordElements).map(el => el.textContent.trim());
    
    if (passwords.length === 0) {
      alert('No passwords to save. Generate some passwords first.');
      return;
    }

    const text = 'Generated Passwords:\n\n' + passwords.map((pwd, index) => `${index + 1}. ${pwd}`).join('\n');
    const blob = new Blob([text], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = `passwords_${new Date().getTime()}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  function clearAll() {
    passwordList.innerHTML = 'Click "Generate Passwords" to create random passwords...';
    strengthIndicator.style.display = 'none';
  }

  // Event listeners
  passwordLength.addEventListener('input', updateLengthValue);
  generateBtn.addEventListener('click', generatePasswords);
  clearBtn.addEventListener('click', clearAll);
  copyAllBtn.addEventListener('click', copyAllPasswords);
  saveBtn.addEventListener('click', saveAsTextFile);

  // Initialize length value
  updateLengthValue();
</script>
</body></html>



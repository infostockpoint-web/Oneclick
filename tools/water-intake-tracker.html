<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Water Intake Tracker - One Click Tools</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="../css/style.css"/>
  <style>
    .progress{height:16px;background:#f0f0f0;border-radius:999px;overflow:hidden}
    .bar{height:100%;background:#1f7ae0;width:0%}
  </style>
</head>
<body>
  <div id="site-header"></div>
  <main class="container" style="padding:60px 0;">
    <div class="tool-card" style="max-width:900px;margin:0 auto;">
      <div style="text-align:center;margin-bottom:10px;">
        <i class="fas fa-tint tool-icon-small" style="font-size:3rem;"></i>
        <div class="tool-name" style="font-size:1.6rem;">Water Intake Tracker</div>
        <div class="tool-desc">Estimate your daily water goal and track intake throughout the day. Stores locally.</div>
      </div>

      <div class="tool-card" style="padding:16px;">
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;align-items:end;">
          <div>
            <label style="display:block;font-weight:600;margin-bottom:6px;">Weight (kg)</label>
            <input id="weight" type="number" min="0" step="0.1" placeholder="70" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;"/>
          </div>
          <div>
            <label style="display:block;font-weight:600;margin-bottom:6px;">Activity</label>
            <select id="activity" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;">
              <option value="0">Low</option>
              <option value="250">Medium (+250 ml)</option>
              <option value="500">High (+500 ml)</option>
            </select>
          </div>
          <div>
            <label style="display:block;font-weight:600;margin-bottom:6px;">Climate</label>
            <select id="climate" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;">
              <option value="0">Mild</option>
              <option value="250">Warm (+250 ml)</option>
              <option value="500">Hot (+500 ml)</option>
            </select>
          </div>
          <button id="setGoal" class="tool-button" style="height:42px;">Set Goal</button>
        </div>
      </div>

      <div class="tool-card" style="padding:16px;">
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;align-items:end;">
          <div>
            <div class="tool-name">Daily Goal</div>
            <div id="goal" class="tool-desc" style="font-size:1.2rem;color:#000;">â€”</div>
          </div>
          <div>
            <div class="tool-name">Consumed</div>
            <div id="consumed" class="tool-desc" style="font-size:1.2rem;color:#000;">0 ml</div>
          </div>
          <div>
            <label style="display:block;font-weight:600;margin-bottom:6px;">Add Intake (ml)</label>
            <div style="display:flex;gap:8px;">
              <input id="addMl" type="number" min="0" step="50" placeholder="250" style="flex:1;padding:10px;border:1px solid #ddd;border-radius:8px;"/>
              <button id="addBtn" class="tool-button">Add</button>
            </div>
          </div>
        </div>
        <div class="progress" style="margin-top:12px;">
          <div id="bar" class="bar"></div>
        </div>
      </div>

      <div class="tool-card" style="padding:16px;">
        <div class="tool-name" style="margin-bottom:6px;">Today Log</div>
        <div id="log" class="tool-desc">No entries yet.</div>
      </div>

      <div class="banner-ad" style="margin-top:16px;">Ad Placeholder (728x90)</div>
      <div style="text-align:center;margin-top:8px;">
        <a class="tool-button" href="../index.html">Back to Home</a>
      </div>
    </div>
  </main>
  <div id="site-footer"></div>
  <script src="../js/include.js"></script>
  <script>
    const KEY='oneclick_water_tracker_v1';
    function todayKey(){ const d=new Date(); return d.toISOString().slice(0,10); }
    function load(){ try { return JSON.parse(localStorage.getItem(KEY))||{} } catch(e){ return {} } }
    function save(d){ localStorage.setItem(KEY, JSON.stringify(d)); }

    function setGoal(){
      const w=+document.getElementById('weight').value||0;
      const act=+document.getElementById('activity').value||0;
      const cli=+document.getElementById('climate').value||0;
      // heuristic: 35 ml per kg + adjustments
      const base = w>0 ? w*35 : 2000; // ml
      const goal = Math.round(base + act + cli);
      const data=load();
      if (!data[todayKey()]) data[todayKey()]={goal, entries:[]};
      data[todayKey()].goal = goal;
      save(data);
      render();
    }

    function add(){
      const ml=+document.getElementById('addMl').value||0; if (!ml) return;
      const data=load(); if (!data[todayKey()]) data[todayKey()]={goal:2000, entries:[]};
      data[todayKey()].entries.push({ml, ts: Date.now()});
      save(data); document.getElementById('addMl').value=''; render();
    }

    function render(){
      const data=load(); const day=data[todayKey()]||{goal:2000, entries:[]};
      const total = day.entries.reduce((a,e)=>a+e.ml,0);
      document.getElementById('goal').textContent = day.goal + ' ml';
      document.getElementById('consumed').textContent = total + ' ml';
      const pct = Math.max(0, Math.min(100, (total/day.goal)*100));
      document.getElementById('bar').style.width = pct + '%';
      const log = document.getElementById('log');
      if (!day.entries.length){ log.textContent='No entries yet.'; return; }
      log.innerHTML = day.entries.slice().reverse().map(e=>{
        const t=new Date(e.ts).toLocaleTimeString();
        return `<div>+${e.ml} ml at ${t}</div>`;
      }).join('');
    }

    document.getElementById('setGoal').addEventListener('click', setGoal);
    document.getElementById('addBtn').addEventListener('click', add);
    render();
  </script>
</body>
</html>


